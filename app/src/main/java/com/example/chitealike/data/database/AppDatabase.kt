package com.example.chitealike.data.database

import android.app.Application
import android.util.Log
import androidx.room.Database
import androidx.room.Room
import androidx.room.RoomDatabase
import androidx.room.TypeConverters
import androidx.sqlite.db.SupportSQLiteDatabase

@Database(entities = [TeaDBModel::class, DishDBModel::class, FavoriteDBModel::class], version = 12)
@TypeConverters(Converters::class)
abstract class AppDatabase : RoomDatabase() {

    abstract fun teaListDao(): TeaListDao
    abstract fun dishesListDao(): DishesListDao
    abstract fun favoritesListDao(): FavoritesListDao


    companion object {
        private var INSTANCE: AppDatabase? = null
        private val LOCK = Any()
        private const val DB_NAME = "tea_list_db"

        private val roomCallback = object : RoomDatabase.Callback() {
            override fun onCreate(db: SupportSQLiteDatabase) {
                super.onCreate(db)

                try {
                    db.execSQL(
                        """
            INSERT INTO teas (tea_id, tea_name, tea_type, tea_image_file_name, tea_country, tea_taste, tea_description, tea_classic_time, tea_classic_temperature, tea_classic_tea_amount, tea_classic_brewing_amount, tea_brewing_time, tea_brewing_temperature, tea_brewing_tea_amount, tea_brewing_brewing_amount) VALUES
            -- Белые чаи (White)
            (1, 'Бай Хао Инь Чжэнь', 'White', 'baihaoinzen.jpg', 'Китай', '["Нежный","Сладкий","Цветочный"]', 'Знаменитый белый чай из провинции Фуцзянь. Собирается ранней весной только из нераспустившихся почек. Обладает легким цветочным ароматом и сладким послевкусием. Считается одним из самых элитных белых чаев.', '4-5 минут', '80°C', '1 ч.л. на чашку', '1-2', '15-20 секунд', '85°C', '5 г на 100 мл', '5-7'),
            (2, 'Бай Му Дань', 'White', 'baimudan.jpg', 'Китай', '["Фруктовый","Цветочный","Нежный"]', 'Белый пион из провинции Фуцзянь. Состоит из почки и двух молодых листочков. Имеет более насыщенный вкус по сравнению с Инь Чжэнь. Обладает фруктовыми нотами и долгим послевкусием. Отлично подходит для ежедневного чаепития.', '3-4 минуты', '85°C', '1 ч.л. на чашку', '1-2', '20-30 секунд', '90°C', '6 г на 100 мл', '4-6'),
            
            -- Зеленые чаи (Green)
            (3, 'Лунцзин', 'Green', 'luncuzin.jpeg', 'Китай', '["Ореховый","Сладковатый","Свежий"]', 'Колодец дракона из провинции Чжэцзян. Один из самых известных зеленых чаев Китая. Обладает плоскими гладкими листьями характерной формы. Вкус нежный с ореховыми нотами и сладким послевкусием. Традиционный чай для императорского двора.', '2-3 минуты', '75°C', '1 ч.л. на чашку', '2-3', '15-25 секунд', '80°C', '4 г на 100 мл', '3-5'),
            (4, 'Би Ло Чунь', 'Green', 'bilochun.jpg', 'Китай', '["Цветочный","Фруктовый","Нежный"]', 'Изумрудные спирали весны из провинции Цзянсу. Чай скручен в tight spirals и покрыт белым ворсом. Обладает интенсивным цветочным ароматом и фруктовым вкусом. Считается одним из самых ароматных зеленых чаев.', '2-3 минуты', '80°C', '1 ч.л. на чашку', '2-3', '20-30 секунд', '85°C', '5 г на 100 мл', '4-6'),
            (5, 'Мао Фэн', 'Green', 'maofen.jpg', 'Китай', '["Цветочный","Сладкий","Свежий"]', 'Ворсистые пики с гор Хуаншань. Чай состоит из нежных почек с белым ворсом. Обладает легким цветочным ароматом и сладким вкусом. Послевкусие долгое и освежающее. Идеален для утреннего чаепития.', '3-4 минуты', '80°C', '1 ч.л. на чашку', '2-3', '25-35 секунд', '85°C', '5 г на 100 мл', '3-5'),
            
            -- Желтые чаи (Yellow)
            (6, 'Цзюнь Шань Инь Чжэнь', 'Yellow', 'czunshanincjen.jpg', 'Китай', '["Нежный","Сладкий","Цветочный"]', 'Серебряные иглы с острова Цзюньшань. Редкий желтый чай из провинции Хунань. Проходит процесс томления который придает ему уникальный вкус. Обладает мягким цветочным ароматом и сладким послевкусием. Считается императорским чаем.', '3-4 минуты', '85°C', '1 ч.л. на чашку', '2-3', '20-30 секунд', '90°C', '6 г на 100 мл', '4-6'),
            (7, 'Мэн Дин Хуан Я', 'Yellow', 'mendinhuanya.jpg', 'Китай', '["Сладкий","Фруктовый","Нежный"]', 'Желтые почки с горы Мэндин. Производится в провинции Сычуань по древней технологии. Обладает сложным фруктовым букетом и медовым послевкусием. Процесс производства включает медленное томление. Очень ценится знатоками чая.', '4-5 минут', '80°C', '1 ч.л. на чашку', '2-3', '25-35 секунд', '85°C', '5 г на 100 мл', '3-5'),
            
            -- Улуны (Oolong)
            (8, 'Те Гуань Инь', 'Oolong', 'teguanin.jpg', 'Китай', '["Цветочный","Медовый","Орхидея"]', 'Железная бодхисаттва из провинции Фуцзянь. Полуферментированный улун с интенсивным цветочным ароматом. Листья плотно скручены и при заваривании раскрываются. Обладает ярким вкусом с нотами орхидеи и меда. Послевкусие долгое и сладкое.', '3-4 минуты', '95°C', '1 ч.л. на чашку', '4-6', '30-45 секунд', '100°C', '7 г на 100 мл', '6-8'),
            (9, 'Да Хун Пао', 'Oolong', 'dahunpao.jpg', 'Китай', '["Древесный","Минеральный","Сладкий"]', 'Большой красный халат с утесов Уи. Легендарный улун из провинции Фуцзянь. Выращивается на скалистых склонах что придает ему минеральность. Обладает сложным букетом с древесными и карамельными нотами. Послевкусие долгое и согревающее.', '4-5 минут', '95°C', '1 ч.л. на чашку', '4-6', '40-60 секунд', '100°C', '8 г на 100 мл', '7-9'),
            (10, 'Шуй Сянь', 'Oolong', 'shuisyan.jpg', 'Китай', '["Цветочный","Древесный","Миндальный"]', 'Нарцисс с утесов Уи. Классический улун из провинции Фуцзянь. Обладает цветочным ароматом с древесными нотами. Вкус насыщенный с миндальным оттенком. Послевкусие долгое и приятное. Отлично подходит для многократного заваривания.', '3-4 минуты', '95°C', '1 ч.л. на чашку', '4-6', '35-50 секунд', '100°C', '7 г на 100 мл', '6-8'),
            
            -- Красные чаи (Red)
            (11, 'Цзинь Цзюнь Мэй', 'Red', 'czinczunmey.jpg', 'Китай', '["Медовый","Фруктовый","Сладкий"]', 'Золотые брови из провинции Фуцзянь. Элитный красный чай из золотистых почек. Обладает насыщенным медовым ароматом и фруктовым вкусом. Цвет настоя яркий золотисто-красный. Послевкусие сладкое и долгое. Считается чаем высшего класса.', '3-4 минуты', '90°C', '1 ч.л. на чашку', '2-3', '20-30 секунд', '95°C', '6 г на 100 мл', '4-6'),
            (12, 'Дянь Хун', 'Red', 'dyanhun.jpg', 'Китай', '["Шоколадный","Медовый","Сладкий"]', 'Юньнаньский красный чай из провинции Юньнань. Изготавливается из крупнолистового сырья. Обладает шоколадным ароматом и медовым вкусом. Цвет настоя темно-красный прозрачный. Послевкусие сладкое и согревающее. Идеален для холодной погоды.', '4-5 минут', '95°C', '1 ч.л. на чашку', '2-3', '25-35 секунд', '100°C', '7 г на 100 мл', '3-5'),
            (13, 'Ци Мэнь Хун Ча', 'Red', 'cimenhuncha.jpg', 'Китай', '["Цветочный","Медовый","Фруктовый"]', 'Кимун из провинции Аньхой. Один из самых известных красных чаев. Обладает сложным цветочным ароматом с медовыми нотами. Вкус насыщенный с фруктовыми оттенками. Цвет настоя ярко-красный. Послевкусие нежное и долгое.', '3-4 минуты', '90°C', '1 ч.л. на чашку', '2-3', '20-30 секунд', '95°C', '6 г на 100 мл', '4-6'),
            
            -- Черные чаи (Black)
            (14, 'Пуэр Шу', 'Black', 'puershu.jpg', 'Китай', '["Землистый","Древесный","Гладкий"]', 'Зрелый пуэр из провинции Юньнань. Проходит процесс искусственного состаривания. Обладает землистым ароматом и гладким вкусом. Цвет настоя темно-коричневый. Послевкусие долгое и согревающее. Способствует пищеварению.', '2-3 минуты', '100°C', '1 ч.л. на чашку', '5-7', '30-45 секунд', '100°C', '8 г на 100 мл', '8-12'),
            (15, 'Пуэр Шэн', 'Black', 'puershen.jpg', 'Китай', '["Фруктовый","Цветочный","Терпкий"]', 'Сырой пуэр из провинции Юньнань. Естественное состаривание годами. Обладает фруктовым ароматом и терпким вкусом. С возрастом становится мягче и сложнее. Цвет настоя светло-золотистый. Послевкусие освежающее и долгое.', '2-3 минуты', '95°C', '1 ч.л. на чашку', '6-8', '25-40 секунд', '100°C', '7 г на 100 мл', '10-15'),
            
            -- Пуэры (Puer)
            (16, 'Лао Шу Пуэр', 'Puer', 'laoshupuer.jpg', 'Китай', '["Древесный","Землистый","Сладкий"]', 'Выдержанный зрелый пуэр из Юньнани. Проходит длительную выдержку в специальных условиях. Обладает сложным древесным ароматом с землистыми нотами. Вкус гладкий с естественной сладостью. Цвет настоя темный рубиновый. Послевкусие очень долгое и приятное.', '3-4 минуты', '100°C', '1 ч.л. на чашку', '6-8', '40-60 секунд', '100°C', '9 г на 100 мл', '10-15'),
            (17, 'Гу Шу Пуэр', 'Puer', 'puershugushu.jpeg', 'Китай', '["Сложный","Древесный","Фруктовый"]', 'Пуэр с древних деревьев из Юньнани. Сырье собирается с деревьев возрастом более 100 лет. Обладает невероятно сложным ароматом и вкусом. Вкус многогранный с фруктовыми и древесными нотами. Послевкусие бесконечно долгое. Ценится коллекционерами.', '3-4 минуты', '100°C', '1 ч.л. на чашку', '8-10', '45-75 секунд', '100°C', '10 г на 100 мл', '12-18')
            
           
        """.trimIndent()
                    )

                    db.execSQL(
                        """
            INSERT INTO dishes (dish_id, dish_name, dish_type, dish_image_file_name, dish_description) VALUES
            (1, 'Фарфоровая гайвань', 'Чайная посуда', 'farforpiala.jpg', 'Трехкомпонентная фарфоровая чаша с крышкой и блюдцем. Идеальна для заваривания нежных зеленых и белых чаев, так как фарфор не впитывает ароматы. Позволяет визуально оценить цвет настоя и раскрытие чайных листьев. Отлично контролирует температуру заваривания. Подходит для всех видов китайского чая.'),
            (2, 'Исинский глиняный чайник', 'Чайная посуда', 'isinglinchainik.jpg', 'Изготовлен из уникальной исинской глины (цзыша) из провинции Цзянсу. Пористый материал постепенно пропитывается ароматом чая, улучшая вкус последующих заварок. Идеален для улунов и выдержанных пуэров. Со временем на поверхности появляется благородный патina. Каждый чайник ручной работы уникален.'),
            (3, 'Чахай', 'Чайная посуда', 'chahai.jpg', 'Резервуар для слива готового чая из чайника или гайвани. Обеспечивает равномерную крепость напитка для всех участников чаепития. Деревянная основа сохраняет температуру чая. Препятствует перезавариванию напитка. Эстетично дополняет чайную церемонию.'),
            (4, 'Бамбуковая чахэ', 'Чайный инструмент', 'bambukchahe.jpg', 'Изящная "лодочка" из натурального бамбука для демонстрации сухого чая. Позволяет оценить аромат и внешний вид чайных листьев перед завариванием. Удобна для дозированной пересыпки чая в чайник. Легкая и экологичная. Традиционный элемент гунфу ча.'),
            (5, 'Керамическая пиала', 'Посуда для питья', 'kerampiala.jpg', 'Простая и глубокая керамическая чаша для медитативного чаепития. Подходит для заваривания зеленых и белых чаев большим объемом воды. Позволяет наблюдать за танцем чайных листьев. Создает особую атмосферу спокойствия и умиротворения.'),
            (6, 'Фарфоровые парные чашки', 'Посуда для питья', 'farfparchashki.jpg', 'Комплект из высокой вэнсябэй (ароматной чашки) и низкой пиньчабэй (вкусовой чашки). Позволяет отдельно насладиться ароматом и вкусом чая. Тонкий фарфор не искажает вкусовые ощущения. Классический набор для улунских чаепитий.'),
            (7, 'Бамбуковые щипцы', 'Чайный инструмент', 'shhipcy-bambuk.jpg', 'Длинные щипцы из натурального бамбука для безопасного обращения с горячей посудой. Используются для споласкивания чашек, перестановки предметов. Не повреждают поверхность чайной утвари. Традиционный элемент чайной церемонии.'),
            (8, 'Нержавеющее ситечко', 'Чайный инструмент', '5f4f593bebacdcae1823d0cd099d.jpeg', 'Фильтр из нержавеющей стали с мелкой сеткой для процеживания чая. Улавливает мелкие чаинки и пыль при переливании. Устанавливается на край чахая. Обеспечивает кристально чистый настой. Легко моется и долговечно.'),
            (9, 'Керамический чабань', 'Чайная утварь', 'ea00801223a58aabe223aa6e050e.jpg', 'Функциональный поднос с встроенным поддоном для слива воды. Объединяет все предметы чайного действа в одной композиции. Изготовлен из глазурованной керамики с дренажной системой. Практичен и эстетичен. Центральный элемент чайного пространства.')
            
           
        """.trimIndent()
                    )

                    db.execSQL(
                        """
            INSERT INTO favorites (favorite_id, tea_id, favorite_name, favorite_description) VALUES
            (1,NULL,'Крутая заметка', 'В данном разделе очень удобно добавлять собственные заметки по поводу чая.')
            
            
           
        """.trimIndent()
                    )
                    Log.d("Database", "Data inserted successfully")
                } catch (e: Exception) {
                    Log.e("Database", "Error inserting data: ${e.message}")
                    e.printStackTrace()
                }

                // SQL запрос для вставки данных в таблицу teas

            }
        }


        fun getInstance(application: Application): AppDatabase {
            INSTANCE?.let {
                return it
            }



            synchronized(LOCK) {
                INSTANCE?.let {
                    return it
                }

                val db = Room.databaseBuilder(application, AppDatabase::class.java, DB_NAME)
                    .fallbackToDestructiveMigration()
                    .addCallback(roomCallback)
                    .build()
                INSTANCE = db
                return db
            }


        }
    }


}